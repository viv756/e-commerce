<%- include('header') %>

<section class="content-main">
    <div class="row">
        <div class="col-9">
            <div class="content-header col-8">
                <h2 class="content-title">Add New Coupon</h2>
                <div>
                    <form action="/admin/addcoupon" method="post" onsubmit="return validateForm();">

                        <button type="submit" class="btn btn-md rounded font-sm hover-up">Add Coupon</button>
                   
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="mb-4">
                            <label for="product_title" class="form-label">code</label>
                            <input type="number" placeholder="Type here" name="code" class="form-control" id="product_title">
                        </div>
                        <div class="mb-4">
                            <label for="product_title" class="form-label">Coupon name</label>
                            <input type="text" placeholder="Type here" name="name" class="form-control" id="product_title">
                        </div>
                        <div class="row gx-3">
                            <div class="mb-4">
                                <label for="product_title" class="form-label">Description</label>
                                <input type="text" placeholder="Type here" name="discription" class="form-control" id="product_title">
                            </div>
                            <div class="col-md-4  mb-3">
                                <label for="product_color" class="form-label">Offer Price</label>
                                <input type="number" placeholder="Type here" name="offerPrice" class="form-control" id="product_color">
                            </div>
                            <div class="col-md-4  mb-3">
                                <label for="product_size" class="form-label">Min Amount</label>
                                <input type="number" name="minimumAmount" placeholder="Type here" class="form-control" id="product_size">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="product_brand" class="form-label">Expiry Date</label>
                            <input type="date" placeholder="Type here" name="expiryDate" class="form-control" id="product_brand">
                        </div>
                    </div>
                </div> <!-- card end// -->
            </form>
            </div>
        </div>
    </div>
</section>



<script>
    function validateForm() {
        // Reset any existing error messages
        clearErrorMessages();

        const name = document.getElementsByName('name')[0].value;
        const discription = document.getElementsByName('discription')[0].value;
        const offerPrice = document.getElementsByName('offerPrice')[0].value;
        const minimumAmount = document.getElementsByName('minimumAmount')[0].value;
        const expiryDate = document.getElementsByName('expiryDate')[0].value;

        let isValid = true; // Assume the form is valid by default

        // Check if name is empty
        if (name.trim() === '') {
            displayErrorMessage('name', 'Please enter a coupon name.');
            isValid = false;
        }

        // Check if description is empty
        if (discription.trim() === '') {
            displayErrorMessage('description', 'Please enter a description.');
            isValid = false;
        }

        // Check if offerPrice is a non-negative number
        if (!/^\d+(\.\d{1,2})?$/.test(offerPrice) || parseFloat(offerPrice) < 0) {
            displayErrorMessage('offerPrice', 'Please enter a valid non-negative offer price.');
            isValid = false;
        }

        // Check if minimumAmount is a non-negative number
        if (!/^\d+(\.\d{1,2})?$/.test(minimumAmount) || parseFloat(minimumAmount) < 0) {
            displayErrorMessage('minimumAmount', 'Please enter a valid non-negative minimum amount.');
            isValid = false;
        }

        if(offerPrice > minimumAmount){
            displayErrorMessage('offer ammount must be lesser than minimum amount');
            isValid = false;
        }

        // Check if expiryDate is empty
        if (expiryDate.trim() === '') {
            displayErrorMessage('expiryDate', 'Please select an expiry date.');
            isValid = false;
        }

        return isValid; // Form is valid
    }

    function displayErrorMessage(fieldName, message) {
        const field = document.getElementsByName(fieldName)[0];
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error-message';
        errorDiv.innerText = message;
        field.parentNode.appendChild(errorDiv);
    }

    function clearErrorMessages() {
        const errorMessages = document.querySelectorAll('.error-message');
        errorMessages.forEach((errorMessage) => {
            errorMessage.parentNode.removeChild(errorMessage);
        });
    }
</script>

<footer class="main-footer font-xs">
    <div class="row pb-30 pt-15">
        <div class="col-sm-6">
            <script>
            document.write(new Date().getFullYear())
            </script> Â©, Evara - HTML Ecommerce Template .
        </div>
        <div class="col-sm-6">
            <div class="text-sm-end">
                All rights reserved
            </div>
        </div>
    </div>
</footer>
</main>
<script src="/admin-assets/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/admin-assets/js/vendors/bootstrap.bundle.min.js"></script>
<script src="/admin-assets/js/vendors/select2.min.js"></script>
<script src="/admin-assets/js/vendors/perfect-scrollbar.js"></script>
<script src="/admin-assets/js/vendors/jquery.fullscreen.min.js"></script>
<script src="/admin-assets/js/vendors/chart.js"></script>
<!-- Main Script -->
<script src="/admin-assets/js/main.js" type="text/javascript"></script>
<script src="/admin-assets/js/custom-chart.js" type="text/javascript"></script>
</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:57 GMT -->
</html>